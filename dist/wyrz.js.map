{"version":3,"file":"wyrz.js","sources":["../src/brain.js","../src/wyrz.js"],"sourcesContent":["class Brain {\r\n  constructor () {\r\n\r\n  }\r\n\r\n  process (content, callback) {\r\n    callback(content)\r\n  }\r\n\r\n  onTextMessage (message) {\r\n    message.reply(message.body)\r\n  }\r\n\r\n  socketMessage (message, socket) {\r\n    socket.emit(message)\r\n  }\r\n}\r\n\r\nexport default Brain\r\n","import util from 'util'\r\nimport http from 'http'\r\n\r\nimport * as Bot from '@kikinteractive/kik'\r\nimport express from 'express'\r\nimport Socket from 'socket.io'\r\n\r\nimport Brain from './brain'\r\n\r\nlet configuration\r\nlet brain\r\nlet bot\r\nlet httpd\r\nlet app\r\nlet io\r\n\r\nconfiguration = {}\r\n\r\nconfiguration.kik = {\r\n  username: 'wyrz',\r\n  apiKey: '162091ee-2785-4af4-b833-91dda5356ff9',\r\n  baseUrl: 'https://wyrz.herokuapp.com/'\r\n}\r\n\r\nbrain = new Brain()\r\nbot = new Bot(configuration.kik)\r\napp = express()\r\n\r\nhttpd = http.createServer()\r\nio = Socket(httpd)\r\n\r\nbot.updateBotConfiguration()\r\n\r\nbot.onTextMessage(it => {\r\n  it.reply(it.body)\r\n  io.emit(it.body)\r\n})\r\n\r\napp.use(express.static('public'))\r\n\r\n\r\nhttpd.on('request', (request, response) => {\r\n  bot.incoming().call(httpd, request, response)\r\n\r\n  if (request.url.indexOf('/incoming') !== 0 && request.url.indexOf('/socket.io') !== -1) {\r\n    app.call(httpd, request, response)\r\n  }\r\n})\r\n\r\nhttpd.listen(process.env.PORT || 8080, function () {\r\n  console.log(httpd.address().port, httpd.remoteAddress)\r\n})\r\n"],"names":["Brain","content","callback","message","reply","body","socket","emit","configuration","brain","bot","httpd","app","io","kik","Bot","express","http","createServer","Socket","updateBotConfiguration","onTextMessage","it","use","static","on","request","response","incoming","call","url","indexOf","listen","process","env","PORT","log","address","port","remoteAddress"],"mappings":";;;;;;;;;;AAAA,MAAMA,KAAN,CAAY;gBACK;;UAINC,OAAT,EAAkBC,QAAlB,EAA4B;aACjBD,OAAT;;;gBAGaE,OAAf,EAAwB;YACdC,KAAR,CAAcD,QAAQE,IAAtB;;;gBAGaF,OAAf,EAAwBG,MAAxB,EAAgC;WACvBC,IAAP,CAAYJ,OAAZ;;CAIJ;;ACTA,IAAIK,aAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,GAAJ;AACA,IAAIC,KAAJ;AACA,IAAIC,GAAJ;AACA,IAAIC,EAAJ;;AAEAL,gBAAgB,EAAhB;;AAEAA,cAAcM,GAAd,GAAoB;YACR,MADQ;UAEV,sCAFU;WAGT;CAHX;;AAMAL,QAAQ,IAAIT,KAAJ,EAAR;AACAU,MAAM,IAAIK,GAAJ,CAAQP,cAAcM,GAAtB,CAAN;AACAF,MAAMI,SAAN;;AAEAL,QAAQM,KAAKC,YAAL,EAAR;AACAL,KAAKM,OAAOR,KAAP,CAAL;;AAEAD,IAAIU,sBAAJ;;AAEAV,IAAIW,aAAJ,CAAkBC,MAAM;KACnBlB,KAAH,CAASkB,GAAGjB,IAAZ;KACGE,IAAH,CAAQe,GAAGjB,IAAX;CAFF;;AAKAO,IAAIW,GAAJ,CAAQP,QAAQQ,MAAR,CAAe,QAAf,CAAR;;AAGAb,MAAMc,EAAN,CAAS,SAAT,EAAoB,CAACC,OAAD,EAAUC,QAAV,KAAuB;MACrCC,QAAJ,GAAeC,IAAf,CAAoBlB,KAApB,EAA2Be,OAA3B,EAAoCC,QAApC;;MAEID,QAAQI,GAAR,CAAYC,OAAZ,CAAoB,WAApB,MAAqC,CAArC,IAA0CL,QAAQI,GAAR,CAAYC,OAAZ,CAAoB,YAApB,MAAsC,CAAC,CAArF,EAAwF;QAClFF,IAAJ,CAASlB,KAAT,EAAgBe,OAAhB,EAAyBC,QAAzB;;CAJJ;;AAQAhB,MAAMqB,MAAN,CAAaC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC,EAAuC,YAAY;UACzCC,GAAR,CAAYzB,MAAM0B,OAAN,GAAgBC,IAA5B,EAAkC3B,MAAM4B,aAAxC;CADF"}